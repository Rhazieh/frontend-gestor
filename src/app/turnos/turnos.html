<!-- Filtro por fecha -->
<label>
  Filtrar por fecha:
  <input type="date" [(ngModel)]="filtroFecha" name="filtroFecha" />
</label>
<br />

<h2>Lista de Turnos</h2>

<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Fecha</th>
      <th>Hora</th>
      <th>Razón</th>
      <th>Paciente</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let turno of turnosFiltrados">
      <td>{{ turno.id }}</td>
      <td>{{ getFechaFormateada(turno.fecha) }}</td>
      <td>{{ turno.hora }}</td>
      <td>{{ turno.razon }}</td>
      <td>{{ turno.paciente?.nombre || 'Sin asignar' }}</td>
      <td>
        <button (click)="editarTurno(turno)">Editar</button>
        <button (click)="eliminarTurno(turno.id)">Eliminar</button>
      </td>
    </tr>
  </tbody>
</table>

<hr />

<h3>Crear Turno</h3>
<form (ngSubmit)="crearTurno()" #formTurno="ngForm">
  <label>
    Fecha:
    <input type="date" [(ngModel)]="nuevoTurno.fecha" name="fecha" required />
  </label><br />
  <label>
    Hora:
    <input type="time" [(ngModel)]="nuevoTurno.hora" name="hora" required />
  </label><br />
  <label>
    Razón:
    <input type="text" [(ngModel)]="nuevoTurno.razon" name="razon" required />
  </label><br />
  <label>
    Paciente:
    <select [(ngModel)]="nuevoTurno.pacienteId" name="pacienteId" required>
      <option [ngValue]="null" disabled>-- Seleccionar paciente --</option>
      <option *ngFor="let paciente of pacientes" [ngValue]="paciente.id">
        {{ paciente.nombre }}
      </option>
    </select>
  </label><br />
  <button type="submit">Crear Turno</button>
</form>

<hr />

<h3>Editar Turno</h3>
<form *ngIf="turnoEditando" (ngSubmit)="guardarEdicion()" #formEdit="ngForm">
  <label>
    Fecha:
    <input type="date" [(ngModel)]="turnoEditando.fecha" name="editFecha" required />
  </label><br />
  <label>
    Hora:
    <input type="time" [(ngModel)]="turnoEditando.hora" name="editHora" required />
  </label><br />
  <label>
    Razón:
    <input type="text" [(ngModel)]="turnoEditando.razon" name="editRazon" required />
  </label><br />
  <label>
    Paciente:
    <input [value]="turnoEditando.paciente?.nombre" disabled />
  </label><br />
  <button type="submit">Guardar Cambios</button>
  <button type="button" (click)="cancelarEdicion()">Cancelar</button>
</form>
